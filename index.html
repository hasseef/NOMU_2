<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ููุตุฉ ููู</title>
<style>
:root{ --border:#e6e9ef; --ink:#0f172a; --muted:#64748b; --bg:#fff; --brand:#0ea5e9; --ok:#16a34a; --warn:#f59e0b; --bad:#ef4444 }
*{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:#fff;color:var(--ink)}
/* Topbar */
header .topbar{display:flex;align-items:center;gap:10px;padding:10px 12px;min-height:56px;border-bottom:1px solid var(--border);background:#fff;position:sticky;top:0;z-index:50}
.brand{display:flex;align-items:center;gap:10px;min-width:0;cursor:pointer}
.brand .logo{width:40px;height:40px;border-radius:12px;object-fit:contain;overflow:hidden;background:#eef2f7;display:inline-block}
.brand-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:48vw;font-weight:800}
/* Left logos */
.left-logos{margin-inline-start:auto;display:flex;align-items:center;gap:8px}
.left-logos .plain-logo{display:block;height:28px;width:auto}
.desktop-login-btn,.home-btn{margin-inline-start:8px;background:var(--brand);color:#fff;border:none;border-radius:10px;padding:8px 12px;font-size:13px;cursor:pointer;text-decoration:none}
.bell{position:relative;display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border:1px solid var(--border);background:#fff;border-radius:12px;padding:0}
.badge{position:absolute;top:-6px;left:-6px;background:#ef4444;color:#fff;border-radius:999px;font-size:11px;line-height:1;padding:3px 6px}
/* Layout (desktop) */
@media (min-width:980px){
  .layout{ display:grid; grid-template-columns: 280px 1fr; gap:16px; align-items:start; padding:16px }
  .mega-left{ position:sticky; top:72px; align-self:start }
  .mega-left details{ border:1px solid var(--border); background:#fff; border-radius:12px; margin:8px 0; overflow:hidden }
  .mega-left summary{ list-style:none; cursor:pointer; padding:10px 12px; font-weight:700; color:var(--ink) }
  .mega-left summary::-webkit-details-marker{ display:none }
  .mega-left .group-body{ padding:8px 10px; display:grid; gap:6px }
  .mega-left a{ display:block; padding:8px 10px; border-radius:10px; color:#334155; text-decoration:none }
  .mega-left a:hover{ background:#f1f5f9 }
  nav.side{ display:none !important }
}
/* Content */
#view{ padding:16px }
.card{border:1px solid var(--border);border-radius:12px;background:#fff;padding:16px}
.kpi-row{display:flex;gap:10px}
.kpi{flex:1;border:1px solid var(--border);border-radius:12px;padding:12px;background:#fff}
/* Tabs generic */
.tabs{ display:flex; gap:8px; flex-wrap:wrap; margin:12px 0 8px }
.tab{ padding:10px 12px; border:1px solid var(--border); border-radius:10px; background:#fff; cursor:pointer; font-weight:600; color:var(--ink); text-decoration:none }
.tab[aria-selected="true"]{ border-color:var(--brand); outline:2px solid rgba(14,165,233,.15) }
/* KPI grid */
.kpi-grid{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:12px }
.kpi-card{ border:1px solid var(--border); border-radius:12px; background:#fff; padding:12px; display:flex; gap:10px; align-items:flex-start }
.kpi-icon{ font-size:22px; line-height:1; padding:8px; border-radius:10px; background:#f1f5f9 }
.kpi-title{ font-weight:700; color:var(--ink); white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.kpi-meta{ display:flex; gap:10px; align-items:center; margin-top:4px; color:#var(--muted); font-size:12px }
.kpi-value{ font-weight:800; font-size:18px; color:var(--ink) }
.badge-chip{ padding:3px 8px; border-radius:999px; font-size:12px; border:1px solid var(--border); background:#fff }
.badge-chip.ok{ color:#065f46; border-color:#bbf7d0; background:#ecfdf5 }
.badge-chip.warn{ color:#92400e; border-color:#fde68a; background:#fffbeb }
.badge-chip.bad{ color:#991b1b; border-color:#fecaca; background:#fef2f2 }
.badge-chip.info{ color:#075985; border-color:#bae6fd; background:#eff6ff }
/* Data table */
.table{ width:100%; border-collapse:separate; border-spacing:0 8px }
.table th{ text-align:start; font-size:13px; color:#64748b; padding:0 10px }
.table td{ background:#fff; border:1px solid var(--border); padding:10px; }
.table tr td:first-child{ border-radius:12px 0 0 12px }
.table tr td:last-child{ border-radius:0 12px 12px 0 }
/* Services */
.services-grid{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px }
.service{ border:1px solid var(--border); border-radius:12px; padding:12px; background:#fff }
.service h4{ margin:0 0 6px 0; font-size:15px }
.service p{ margin:0; color:#64748b; font-size:13px }
/* About */
.grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
.list-dash{ margin:0; padding-inline-start:18px }
.list-dash li{ margin:6px 0 }
.highlight{ background:#f8fafc; border:1px solid var(--border); border-radius:12px; padding:12px }
/* Mobile */
.mobile-menu-btn{display:none}
@media (max-width:979px){
  .brand-title{max-width:52vw}
  .left-logos .plain-logo{height:22px}
  .mobile-menu-btn{
    display:inline-flex;align-items:center;gap:6px;margin-inline-start:8px;
    background:#0ea5e9;color:#fff;border:none;border-radius:10px;padding:6px 10px;font-size:13px
  }
  .npanel{inset:auto 0 0 0;top:auto;width:100%;max-height:55vh;border-radius:16px 16px 0 0}
  .layout{ display:block; padding:12px }
  .mega-left{ display:none }
  .tabs,.kpi-row{display:block !important}
  .tabs > *, .kpi-row > *{display:block;margin:6px 0 !important}
  .kpi-grid{ grid-template-columns:1fr 1fr }
  .services-grid{ grid-template-columns:1fr }
  .fab-home{
    position:fixed; right:14px; bottom:14px; z-index:9998; width:52px; height:52px; border-radius:999px; border:1px solid var(--border);
    display:flex; align-items:center; justify-content:center; background:#0ea5e9; color:#fff; font-size:22px; text-decoration:none;
    box-shadow:0 10px 30px rgba(2,12,27,.18);
  }
}
button:focus, a:focus{outline:2px solid #0ea5e9;outline-offset:2px}
</style>
</head>
<body>

<header>
  <div class="topbar">
    <div class="brand" onclick="location.hash='#/overview'" role="link" tabindex="0" aria-label="ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ">
      <div class="logo"></div>
      <div><b class="brand-title">ููุตุฉ ููู</b></div>
    </div>
    <a class="home-btn" href="#/overview" aria-label="ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ">ุงูุฑุฆูุณูุฉ</a>
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="ูุชุญ ุงููุงุฆูุฉ (ุฌูุงู)">ุงููุงุฆูุฉ โฐ</button>
    <div class="left-logos">
      <img class="plain-logo" src="vision2030.png" alt="ุดุนุงุฑ ุฑุคูุฉ 2030" width="88" height="28" loading="lazy" decoding="async">
      <img class="plain-logo" src="talbiya.png" alt="ุดุนุงุฑ ุชูุจูุฉ" width="88" height="28" loading="lazy" decoding="async">
      <button class="desktop-login-btn" id="desktopLoginBtn" aria-label="ุชุณุฌูู ุงูุฏุฎูู (ููุจููุชุฑ)">ุชุณุฌูู ุงูุฏุฎูู</button>
      <button id="bell" class="bell" aria-label="ุงูุฅุดุนุงุฑุงุช">๐<span id="bellBadge" class="badge" style="display:none">0</span></button>
      <div id="npanel" class="npanel" style="display:none;border:1px solid var(--border);background:#fff;padding:12px;border-radius:12px;position:absolute;right:0;top:48px;width:min(92vw,420px);max-height:60vh;overflow:auto"></div>
    </div>
  </div>
</header>

<div class="layout">
  <aside class="mega-left" aria-label="ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ">
    <details open>
      <summary>ุงูุจุฏุก ุงูุณุฑูุน</summary>
      <div class="group-body">
        <a href="#/overview">ูุธุฑุฉ ุนุงูุฉ</a>
        <a href="#/intro">ูู ูุญู</a>
        <a href="#/services">ุงูุฎุฏูุงุช</a>
      </div>
    </details>
    <details>
      <summary>ุงูุญุณุงุจุงุช</summary>
      <div class="group-body">
        <a href="#/acc/health">ูุฒุงุฑุฉ ุงูุตุญุฉ</a>
        <a href="#/acc/clinic">ุงููุฑุงูุฒ ุงูุตุญูุฉ</a>
        <a href="#/acc/education">ูุฒุงุฑุฉ ุงูุชุนููู</a>
        <a href="#/acc/neighborhood">ูุฑุงูุฒ ุงูุฃุญูุงุก</a>
        <a href="#/acc/nonprofit">ุงูุฌูุนูุงุช</a>
        <a href="#/acc/hr">ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ</a>
        <a href="#/acc/csr">ุงููุทุงุน ุงูุฎุงุต</a>
        <a href="#/acc/family">ุงูุฃุณุฑุฉ</a>
        <a href="#/acc/admin">ุงููุฌูุฉ ุงููุทููุฉ</a>
      </div>
    </details>
    <details>
      <summary>ุงูุชุดุบูู ูุงูุชูุงุฑูุฑ</summary>
      <div class="group-body">
        <a href="#/operations">ุงูุชุดุบูู</a>
        <a href="#/reports">ุงูุชูุงุฑูุฑ</a>
        <a href="#/kpi">ูุคุดุฑุงุช KPI</a>
      </div>
    </details>
    <details>
      <summary>ุงูุฏุนู ูุงูุฌูุฏุฉ</summary>
      <div class="group-body">
        <a href="#/support">ุงูุฏุนู ุงูููู</a>
        <a href="#/policies">ุงูุฃุฏูุฉ ูุงูุณูุงุณุงุช</a>
        <a href="#/contact">ุงุชุตู ุจูุง</a>
      </div>
    </details>
  </aside>

  <section id="view" class="content">
    <div class="card">
      <h2>ุฃูููุง ุจู ูู ููุตุฉ ููู</h2>
      <p>ููุตุฉ ูุทููุฉ ุชูุนูู ุจุชูููุฉ ุงูุทูููุฉ ุงููุจูุฑุฉ ุนุจุฑ ุงูุชูุงูู ุจูู ุงููุทุงุนุงุช ูุชูุญูุฏ ุงูุฌููุฏ ูุงูุจูุงูุงุช ูุงููุจุงุฏุฑุงุช.</p>
    </div>
    <div class="kpi-row">
      <div class="kpi">KPI</div>
      <div class="kpi">KPI</div>
      <div class="kpi">KPI</div>
    </div>
  </section>
</div>

<a class="fab-home" href="#/overview" aria-label="ุงูุฑุฆูุณูุฉ" style="display:none">โ</a>

<script>
/* ุฅุดุนุงุฑุงุช */
(function(){
  const bell=document.getElementById('bell'), panel=document.getElementById('npanel');
  const isMobile = ()=> window.matchMedia && matchMedia("(max-width:979px)").matches;
  if(!bell||!panel) return;
  bell.onclick=(e)=>{
    e.preventDefault();
    if(isMobile()){
      panel.style.position='fixed'; panel.style.right='0'; panel.style.left='0'; panel.style.top='auto'; panel.style.bottom='0';
      panel.style.borderRadius='16px 16px 0 0';
    }else{
      panel.style.position='absolute'; panel.style.right='0'; panel.style.left='auto'; panel.style.top='48px'; panel.style.bottom='auto';
      panel.style.borderRadius='12px';
    }
    panel.style.display = panel.style.display==='block' ? 'none' : 'block';
    if(panel.style.display==='block' && !panel.dataset.filled){
      panel.innerHTML = '<b>ุงูุฅุดุนุงุฑุงุช</b><ul style="margin:8px 0 0 18px"><li>ุชู ุชุญุฏูุซ ุชูุงุฑูุฑ ุดูุฑ ุฃูุชูุจุฑ</li><li>ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงูุฃุณุจูุนูุฉ ุฌุงูุฒุฉ</li></ul>';
      panel.dataset.filled = '1';
    }
  };
})();

/* ูุงุฆูุฉ ุงูุฌูุงู */
(function(){
  const isMobile = ()=> window.matchMedia && matchMedia("(max-width:979px)").matches;
  function lockScroll(lock){ document.documentElement.style.overflow = lock ? 'hidden' : ''; }
  function focusTrap(container, enable){
    if(!container) return;
    function onKey(e){
      if(e.key!=='Tab') return;
      const f = container.querySelectorAll('a,button,[tabindex]:not([tabindex="-1"])');
      if(!f.length) return; const first=f[0], last=f[f.length-1];
      if(e.shiftKey && document.activeElement===first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement===last){ e.preventDefault(); first.focus(); }
    }
    if(enable) container.addEventListener('keydown', onKey);
  }
  const GROUPS = [
    { title:'ุงูุจุฏุก ุงูุณุฑูุน', items:[
      {t:'ูุธุฑุฉ ุนุงูุฉ', k:'#/overview'},{t:'ูู ูุญู', k:'#/intro'},{t:'ุงูุฎุฏูุงุช', k:'#/services'}
    ]},
    { title:'ุงูุญุณุงุจุงุช', items:[
      {t:'ูุฒุงุฑุฉ ุงูุตุญุฉ', k:'#/acc/health'},{t:'ุงููุฑุงูุฒ ุงูุตุญูุฉ', k:'#/acc/clinic'},{t:'ูุฒุงุฑุฉ ุงูุชุนููู', k:'#/acc/education'},
      {t:'ูุฑุงูุฒ ุงูุฃุญูุงุก', k:'#/acc/neighborhood'},{t:'ุงูุฌูุนูุงุช', k:'#/acc/nonprofit'},{t:'ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ', k:'#/acc/hr'},
      {t:'ุงููุทุงุน ุงูุฎุงุต', k:'#/acc/csr'},{t:'ุงูุฃุณุฑุฉ', k:'#/acc/family'},{t:'ุงููุฌูุฉ ุงููุทููุฉ', k:'#/acc/admin'}
    ]},
    { title:'ุงูุชุดุบูู ูุงูุชูุงุฑูุฑ', items:[
      {t:'ุงูุชุดุบูู', k:'#/operations'},{t:'ุงูุชูุงุฑูุฑ', k:'#/reports'},{t:'ูุคุดุฑุงุช KPI', k:'#/kpi'}
    ]},
    { title:'ุงูุฏุนู ูุงูุฌูุฏุฉ', items:[
      {t:'ุงูุฏุนู ุงูููู', k:'#/support'},{t:'ุงูุฃุฏูุฉ ูุงูุณูุงุณุงุช', k:'#/policies'},{t:'ุงุชุตู ุจูุง', k:'#/contact'}
    ]}
  ];
  function ensureFab(){
    const fab=document.querySelector('.fab-home');
    if (window.matchMedia('(max-width:979px)').matches){ if(fab) fab.style.display='flex'; }
    else { if(fab) fab.style.display='none'; }
  }
  function openMobileMenu(){
    if (!isMobile()) return;
    if (document.getElementById('mobileMenuSheet')) return;
    const sheet = document.createElement('div'); sheet.id='mobileMenuSheet';
    sheet.style.cssText='position:fixed;inset:auto 0 0 0;background:#fff;border-top:1px solid var(--border);border-radius:16px 16px 0 0;box-shadow:0 -12px 30px rgba(2,12,27,.15);z-index:9999;max-height:65vh;overflow:auto;padding:12px;transform:translateY(16px);opacity:0;transition:.2s';
    let html='';
    GROUPS.forEach(g=>{
      html += `<details class="group" style="border:1px solid var(--border);border-radius:12px;margin:8px 0;background:#fff">
        <summary style="list-style:none;cursor:pointer;padding:12px;font-weight:700;color:#0f172a;outline:none">${g.title}</summary>
        <div class="submenu" style="display:grid;gap:8px;padding:8px 10px;border-top:1px solid var(--border)">
          ${g.items.map(i=>`<a href="${i.k}" data-go="${i.k}" style="display:block;text-align:center;border:1px solid var(--border);background:#f8fafc;padding:10px;border-radius:10px;color:#0f172a;text-decoration:none">${i.t}</a>`).join('')}
        </div>
      </details>`;
    });
    sheet.innerHTML = html;
    document.body.appendChild(sheet);
    requestAnimationFrame(()=> sheet.style.cssText += ';transform:translateY(0);opacity:1;');
    lockScroll(true); focusTrap(sheet, true);
    sheet.addEventListener('click', (e)=>{
      const a = e.target.closest('a[data-go]'); if(!a) return;
      e.preventDefault(); location.hash = a.getAttribute('data-go'); close();
    });
    setTimeout(()=>{ document.addEventListener('click', outside, {once:true}); },0);
    function outside(e){ if(!sheet.contains(e.target)) close(); }
    function close(){ sheet.style.cssText += ';transform:translateY(16px);opacity:0;'; setTimeout(()=>{ sheet.remove(); lockScroll(false); }, 180); }
  }
  window.addEventListener('load', ()=>{
    ensureFab();
    const mb = document.getElementById('mobileMenuBtn');
    if (mb) mb.addEventListener('click', (e)=>{ e.preventDefault(); openMobileMenu(); });
  });
  window.addEventListener('resize', ensureFab);
})();

/* ุตูุญุงุช ุฃุณุงุณูุฉ + ุฎุฏูุงุช + ุญุณุงุจุงุช ูุน ุชุจููุจุงุช ููุคุดุฑุงุช */
(function(){
  const view = document.getElementById('view') || document.body;

  const ACCOUNTS = {
    "health":    { name:"ูุฒุงุฑุฉ ุงูุตุญุฉ", icon:"๐ฅ" },
    "clinic":    { name:"ุงููุฑุงูุฒ ุงูุตุญูุฉ", icon:"๐ฉบ" },
    "education": { name:"ูุฒุงุฑุฉ ุงูุชุนููู", icon:"๐" },
    "neighborhood": { name:"ูุฑุงูุฒ ุงูุฃุญูุงุก", icon:"๐๏ธ" },
    "nonprofit": { name:"ุงูุฌูุนูุงุช", icon:"๐ค" },
    "hr":        { name:"ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ", icon:"๐ค" },
    "csr":       { name:"ุงููุทุงุน ุงูุฎุงุต", icon:"๐ข" },
    "family":    { name:"ุงูุฃุณุฑุฉ", icon:"๐จโ๐ฉโ๐ง" },
    "admin":     { name:"ุงููุฌูุฉ ุงููุทููุฉ", icon:"๐ก๏ธ" },
  };

  const TABS = [
    {key:"summary",   label:"ุงูููุฎุต"},
    {key:"services",  label:"ุงูุฎุฏูุงุช"},
    {key:"operations",label:"ุงูุนูููุงุช"},
    {key:"indicators",label:"ุงููุคุดุฑุงุช"},
    {key:"reports",   label:"ุงูุชูุงุฑูุฑ"},
    {key:"resources", label:"ุงูููุงุฑุฏ"},
    {key:"governance",label:"ุงูุญูููุฉ"}
  ];

  const KPI_TITLES = [
    {t:"ูุณุจุฉ ุชุบุทูุฉ ุงููุญุต ุงููุจูุฑ", icon:"๐งช"},
    {t:"ุฅุชูุงู ุงูุชุทุนููุงุช ุงูุฃุณุงุณูุฉ", icon:"๐"},
    {t:"ุฒูู ุงูุงูุชุธุงุฑ ุงููุชูุณุท (ุฏูููุฉ)", icon:"โฑ๏ธ"},
    {t:"ุงูุชุฒุงู ุงูุจุฑูุชููููุงุช ุงูุณุฑูุฑูุฉ", icon:"๐"},
    {t:"ุฌูุฏุฉ ุงูุจูุงูุงุช ูุงูุชูุงููุง", icon:"๐"},
    {t:"ุงูุชุบุทูุฉ ุงูุฌุบุฑุงููุฉ ููุฎุฏูุงุช", icon:"๐บ๏ธ"},
    {t:"ูุนุฏู ุงูุฅุญุงูุงุช ุงููุบููุฉ", icon:"๐"},
    {t:"ุฑุถุง ุงููุณุชููุฏูู", icon:"โญ"},
    {t:"ูุณุจุฉ ุงูุญุงูุงุช ุนุงููุฉ ุงูุฎุทูุฑุฉ", icon:"โ๏ธ"},
    {t:"ููุงุกุฉ ุงูุฅููุงู", icon:"๐ฐ"},
    {t:"ุงูุชูุงูู ุจูู ุงูุฌูุงุช", icon:"๐งฉ"},
    {t:"ุงูุฃุซุฑ ุงููุฌุชูุนู", icon:"๐ฑ"}
  ];

  const GLOBAL_SERVICES = [
    {t:"ููุญุฉ ูุชุงุจุนุฉ ุงูุทูููุฉ ุงููุจูุฑุฉ", d:"ูุธุฑุฉ ุดุงููุฉ ููุจูุงูุงุช ูุงููุคุดุฑุงุช ุนุจุฑ ุงูุฌูุงุช."},
    {t:"ุฅุฏุงุฑุฉ ุงูุฅุญุงูุงุช", d:"ูุณุงุฑ ููุญุฏ ููุฅุญุงูุฉ ูุงููุชุงุจุนุฉ ูุงูุฅุบูุงู."},
    {t:"ุณุฌู ุงูุทูู ุงูููุญูุฏ", d:"ููู ููุญุฏ ููุทูู ูุฑุจุท ุจูู ุงูุฎุฏูุงุช ุงูุตุญูุฉ ูุงูุชุนููููุฉ ูุงูุงุฌุชูุงุนูุฉ."},
    {t:"ุชูุงุฑูุฑ ููุงุณ ุงูุฃุซุฑ", d:"ุชุญููู ุฃุซุฑ ุงูุจุฑุงูุฌ ูุงูุชุฏุฎูุงุช ุนูู ูุณุชูู ุงููุฌุชูุน."},
    {t:"ุฃุชูุชุฉ ุงูุชูุจููุงุช", d:"ุฅุดุนุงุฑุงุช ุฐููุฉ ููุญุงูุงุช ุงูุญุฑุฌุฉ ุฃู ุงูุงูุญุฑุงูุงุช."},
    {t:"ูุฎุฒูู ุงูุฎุฏูุงุช ูุงูุทุงูุงุช", d:"ุฑุตุฏ ุงูุทุงูุฉ ุงูุงุณุชูุนุงุจูุฉ ูููุงูุน ุงูุฎุฏูุฉ ูุงูุชุบุทูุฉ."},
    {t:"ุชูุงูู ุงูุจูุงูุงุช", d:"ูุงุฌูุงุช API ูุขููุงุช ูุดุงุฑูุฉ ุขููุฉ ููุจูุงูุงุช."},
    {t:"ุญูููุฉ ุงูุจูุงูุงุช ูุงูุงูุชุซุงู", d:"ุณูุงุณุงุชุ ุตูุงุญูุงุชุ ุชุชุจูุนุ ูุชุฏููู."},
    {t:"ูุคุดุฑุงุช ุงูุฃุฏุงุก ุงููุชูุฏูุฉ", d:"ุฅูุดุงุก ุญูุฒู ูุคุดุฑุงุช ูุฑุจุทูุง ุจุงูุฃูุฏุงู."},
  ];

  function gradeLabel(g){ if(g==="ok")return"ุฌูุฏ"; if(g==="warn")return"ุชุญุฐูุฑ"; if(g==="bad")return"ุญุฑูุฌ"; return"ูุนูููุฉ"; }

  function makeDemoKPIs(len){
    const list = KPI_TITLES.slice(0, len);
    return list.map(k=>{
      let v, unit=""; let n;
      if (k.t.includes("ุฒูู ุงูุงูุชุธุงุฑ")){ n = 5 + Math.floor(Math.random()*20); v=n; unit="ุฏ"; }
      else if (k.t.includes("ุญุงูุงุช ุนุงููุฉ")){ n = +(3 + Math.random()*7).toFixed(1); v=n; unit="%"; }
      else if (k.t.includes("ููุงุกุฉ ุงูุฅููุงู")){ n = +(80 + Math.random()*15).toFixed(0); v=n; unit="%"; }
      else { n = +(70 + Math.random()*25).toFixed(0); v=n; unit="%"; }
      let grade="info";
      if(unit==="%"){ grade = n>=85?"ok": n>=70?"warn":"bad"; }
      if(k.t.includes("ุฒูู ุงูุงูุชุธุงุฑ")){ grade = n<=10?"ok": n<=20?"warn":"bad"; }
      return { title:k.t, icon:k.icon, value: v + unit, grade, trend:(Math.random()>.5?"+":"-") + (Math.random()*5|0) + "%" };
    });
  }

  function servicesGrid(items){
    return '<div class="services-grid">'+ items.map(s=>`
      <div class="service">
        <h4>${s.t}</h4>
        <p>${s.d}</p>
      </div>`).join("") + '</div>';
  }

  function renderIntro(){
    view.innerHTML = `
      <div class="card"><h2>ูู ูุญู</h2>
        <div class="grid-2">
          <div class="highlight"><b>ุงูุฑุคูุฉ</b><br>ุฃู ุชููู ุงููุฑุฌุน ุงููุทูู ุงูุดุงูู ูุชุทููุฑ ููุธููุฉ ุงูุทูููุฉ ุงููุจูุฑุฉ.</div>
          <div class="highlight"><b>ุงูุฑุณุงูุฉ</b><br>ุชูููู ุงูุฌูุงุช ุนุจุฑ ุฃุฏูุงุช ุชุญููููุฉ ูุชุดุบูููุฉ ููุคุดุฑุงุช ุฃุฏุงุก ุฏุงุนูุฉ ูุตูุน ุงููุฑุงุฑ.</div>
        </div>
        <div class="grid-2" style="margin-top:12px">
          <div class="card"><b>ุงูุฃูุฏุงู ุงูุฅุณุชุฑุงุชูุฌูุฉ</b>
            <ul class="list-dash">
              <li>ุฑูุน ุฌูุฏุฉ ูููุงุกุฉ ุงูุฎุฏูุงุช ุงูููุฏูุฉ ููุทูู ูุงูุฃุณุฑุฉ.</li>
              <li>ุชุนุฒูุฒ ุงูุชูุงูู ูุงูููุงุกูุฉ ุจูู ุงูุฌูุงุช ูุงูุจุฑุงูุฌ.</li>
              <li>ุชุญุณูู ุฅุชุงุญุฉ ุงูุจูุงูุงุช ูุฏุนู ุงุชุฎุงุฐ ุงููุฑุงุฑ.</li>
              <li>ููุงุณ ุงูุฃุซุฑ ูุชุญุณูู ุงูุงุณุชุซูุงุฑ ุงูุงุฌุชูุงุนู.</li>
            </ul>
          </div>
          <div class="card"><b>ุงููููุฉ ุงููุถุงูุฉ</b>
            <ul class="list-dash">
              <li>ููุตุฉ ููุญุฏุฉ ุชุฑุจุท ุงููุทุงุนุงุช ูุงูุจูุงูุงุช.</li>
              <li>ูุคุดุฑุงุช ุฃุฏุงุก ูุงุจูุฉ ููุชุฎุตูุต ูุน ุชูุจููุงุช ุฐููุฉ.</li>
              <li>ุญูููุฉ ุจูุงูุงุช ูุงูุชุซุงู ูุณูุงุณุงุช ูุงุถุญุฉ.</li>
              <li>ุชูุงุฑูุฑ ุฏูุฑูุฉ ูููุงุณ ุฃุซุฑ ุนูู ุงููุณุชูู ุงููุทูู.</li>
            </ul>
          </div>
        </div>
        <div class="card" style="margin-top:12px">
          <b>ุฃุตุญุงุจ ุงููุตูุญุฉ</b>
          <p class="muted">ุงููุฒุงุฑุงุช ูุงูููุฆุงุช ูุงูุฌูุนูุงุช ูุงููุทุงุน ุงูุฎุงุต ูุงูุฃุณุฑุ ูุชุชูุญ ุงูููุตุฉ ุฃุฏูุงุฑ ูุตูุงุญูุงุช ูุฎุตุตุฉ ููู ูุฆุฉ.</p>
        </div>
      </div>`;
  }

  function renderServices(){
    view.innerHTML = `
      <div class="card">
        <h2>ูุชุงููุฌ ุงูุฎุฏูุงุช</h2>
        <p style="color:#64748b">ูุฌููุนุฉ ุฎุฏูุงุช ุชุดุบูููุฉ ูุชุญููููุฉ ุชุฏุนู ุฑุญูุฉ ุงูุทูู ูุงูุฃุณุฑุฉ ุนุจุฑ ุงููุทุงุนุงุช.</p>
        ${servicesGrid(GLOBAL_SERVICES)}
      </div>`;
  }

  function renderOverview(){
    const kpis = makeDemoKPIs(8);
    view.innerHTML = `
      <div class="card">
        <h2>ูุธุฑุฉ ุนุงูุฉ</h2>
        <p style="color:#64748b">ููุฎุต ุณุฑูุน ูุฃุจุฑุฒ ุงููุคุดุฑุงุช ุนุจุฑ ุงูููุธููุฉ.</p>
      </div>
      <div class="kpi-grid" style="margin-top:12px">
        ${kpis.map(k=>`
          <div class="kpi-card">
            <div class="kpi-icon">${k.icon}</div>
            <div class="kpi-body">
              <div class="kpi-title" title="${k.title}">${k.title}</div>
              <div class="kpi-meta">
                <span class="kpi-value">${k.value}</span>
                <span class="badge-chip ${k.grade}">${gradeLabel(k.grade)}</span>
                <span class="badge-chip info">${k.trend}</span>
              </div>
            </div>
          </div>`).join("")}
      </div>`;
  }

  function renderAccount(accKey, tabKey){
    const acc = ACCOUNTS[accKey];
    const currentTab = TABS.find(t=>t.key===tabKey) ? tabKey : "summary";
    if (!acc){ view.innerHTML = notFound(); return; }
    const header = `
      <div class="card" style="display:flex;justify-content:space-between;align-items:center;gap:10px">
        <div style="display:flex;align-items:center;gap:10px">
          <div class="kpi-icon" aria-hidden="true" style="font-size:24px">${acc.icon}</div>
          <div>
            <div style="font-weight:800">${acc.name}</div>
            <div style="color:#64748b;font-size:13px">ููุญุฉ ุชุญูู ุงูุญุณุงุจ ยท ุชุจููุจ: <b>${TABS.find(t=>t.key===currentTab).label}</b></div>
          </div>
        </div>
        <a class="btn" style="text-decoration:none" href="#/services">ูุชุงููุฌ ุงูุฎุฏูุงุช</a>
      </div>`;

    const tabs = `<nav class="tabs" role="tablist" aria-label="ุชุจููุจุงุช ุงูุญุณุงุจ">`+
      TABS.map(t=>`<a class="tab" role="tab" aria-selected="${t.key===currentTab}" href="#/acc/${accKey}?tab=${t.key}">${t.label}</a>`).join("")+
      `</nav><div id="accContent"></div>`;

    view.innerHTML = header + tabs;
    const mount = document.getElementById('accContent');

    if (currentTab==="summary"){
      const kpis = makeDemoKPIs(8);
      mount.innerHTML = `<div class="kpi-grid">${kpis.map(k=>`
        <div class="kpi-card">
          <div class="kpi-icon">${k.icon}</div>
          <div class="kpi-body">
            <div class="kpi-title" title="${k.title}">${k.title}</div>
            <div class="kpi-meta">
              <span class="kpi-value">${k.value}</span>
              <span class="badge-chip ${k.grade}">${gradeLabel(k.grade)}</span>
              <span class="badge-chip info">${k.trend}</span>
            </div>
          </div>
        </div>`).join("")}</div>`;
    }
    else if (currentTab==="services"){
      const spec = [
        {t:"ููุงุกูุฉ ุงูุฌุฏุงูู ุงูุฒูููุฉ ููุชุทุนูู", d:"ุชูุณูู ุงูุญููุงุช ูุงูููุงุนูุฏ ูุน ุงูุณุฌูุงุช ุงููุทููุฉ."},
        {t:"ููุญุฉ ุญุงูุงุช ุนุงููุฉ ุงูุฎุทูุฑุฉ", d:"ุชุฑููุฒ ุนูู ุญุงูุงุช ุชุญุชุงุฌ ุชุฏุฎู ูุชุนุฏุฏ ุงูุฌูุงุช."},
        {t:"ุชูุงูู ููุฑู ูุน ุงูุนูุงุฏุงุช", d:"ุชุจุงุฏู ุญุงูุงุช ูุฅุญุงูุงุช ููุฑู ุนุจุฑ API."},
      ];
      mount.innerHTML = `<div class="card"><b>ุฎุฏูุงุช ${acc.name}</b>${servicesGrid(spec)}</div>`;
    }
    else if (currentTab==="operations"){
      mount.innerHTML = `<div class="card"><b>ุงูุนูููุงุช ุงูุฌุงุฑูุฉ</b>
        <ul class="list-dash">
          <li>ุชูุนูู ุญููุฉ ุงููุญุต ุงููุจูุฑ ูู ุงูููุงุทู ุฐุงุช ุงูุชุบุทูุฉ ุงูููุฎูุถุฉ.</li>
          <li>ุชุญุณูู ูุณุงุฑ ุงูุฅุญุงูุงุช ุจูู ุงูุฌูุฉ ูุงูุนูุงุฏุงุช ุงูุทุฑููุฉ.</li>
          <li>ุฅุทูุงู ููุญุฉ ูุชุงุจุนุฉ ุฒูู ุงูุงูุชุธุงุฑ ุงูุฃุณุจูุนูุฉ.</li>
        </ul>
      </div>`;
    }
    else if (currentTab==="indicators"){
      const kpis = makeDemoKPIs(12);
      mount.innerHTML = `<table class="table">
        <thead><tr><th>ุงููุคุดุฑ</th><th>ุงููููุฉ</th><th>ุงูุชูููู</th><th>ุงูุงุชุฌุงู</th><th>ุขุฎุฑ ุชุญุฏูุซ</th></tr></thead>
        <tbody>${kpis.map(k=>`
          <tr>
            <td>${k.title}</td>
            <td><b>${k.value}</b></td>
            <td><span class="badge-chip ${k.grade}">${gradeLabel(k.grade)}</span></td>
            <td><span class="badge-chip info">${k.trend}</span></td>
            <td><span class="badge-chip">ุงูููู</span></td>
          </tr>`).join("")}</tbody>
      </table>`;
    }
    else if (currentTab==="reports"){
      mount.innerHTML = `<div class="card"><b>ุชูุงุฑูุฑ ${acc.name}</b>
        <div class="services-grid" style="grid-template-columns:repeat(3,minmax(0,1fr))">
          ${["ุงูุฃุฏุงุก ุงูุดูุฑู","ุงูุฌูุฏุฉ ูุงูุงูุชุซุงู","ุงูุฅุญุงูุงุช ูุงูุงูุชุธุงุฑ","ุงูุชุบุทูุฉ ุงูุฌุบุฑุงููุฉ","ุงูุฃุซุฑ ุงููุฌุชูุนู","ููุงุกุฉ ุงูุฅููุงู"].map(t=>`
            <a class="service" href="#" onclick="return false" style="text-decoration:none;color:#0f172a">
              <h4>ุชูุฑูุฑ ${t}</h4><p>PDF ยท ุขุฎุฑ ุฅุตุฏุงุฑ</p>
            </a>`).join("")}
        </div>
      </div>`;
    }
    else if (currentTab==="resources"){
      mount.innerHTML = `<div class="card"><b>ุงูููุงุฑุฏ</b>
        <ul class="list-dash">
          <li><a href="#/policies">ุงูุฃุฏูุฉ ูุงูุณูุงุณุงุช</a></li>
          <li><a href="#/support">ุงูุฏุนู ุงูููู</a></li>
          <li><a href="#/contact">ุงุชุตู ุจูุง</a></li>
        </ul>
      </div>`;
    }
    else if (currentTab==="governance"){
      mount.innerHTML = `<div class="card"><b>ุงูุญูููุฉ ูุงูุฃุฏูุงุฑ</b>
        <div class="grid-2">
          <div class="highlight">
            <b>ุงูุฃุฏูุงุฑ</b>
            <ul class="list-dash">
              <li>ูุงูู ุงูุญุณุงุจ</li><li>ูุดุฑู ุงููุคุดุฑุงุช</li><li>ููุณู ุงูุชูุงุฑูุฑ</li><li>ุฏุนู ููู</li>
            </ul>
          </div>
          <div class="highlight">
            <b>ุณูุงุณุงุช ุงูุจูุงูุงุช</b>
            <ul class="list-dash">
              <li>ูุจุฏุฃ ุฃูู ุตูุงุญูุฉ</li><li>ุฅุฎูุงุก ุงููููุฉ ููุนุฑุถ ุงูุนุงู</li><li>ุชุฏููู ุฏุฎูู ูุชุบููุฑุงุช</li>
            </ul>
          </div>
        </div>
      </div>`;
    }
  }

  function notFound(){ return '<div class="card"><h2>ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุตูุญุฉ</h2><p>ุชุญูู ูู ุงูุฑุงุจุท ุฃู ุงุฎุชุฑ ุตูุญุฉ ูู ุงููุงุฆูุฉ.</p></div>'; }

  function parseRoute(){
    const h = location.hash || "";
    if (h==="" || h==="#" || h==="#/") return {type:"overview"};
    if (h==="#/overview") return {type:"overview"};
    if (h==="#/intro") return {type:"intro"};
    if (h==="#/services") return {type:"services"};
    const m = h.match(/^#\/acc\/([^?]+)(?:\?tab=([a-z]+))?/);
    if (m) return {type:"acc", key:m[1], tab:m[2]||"summary"};
    return {type:"unknown"};
  }

  function applyTitle(){
    const h = location.hash;
    const MAP = {
      "#/overview":"ูุธุฑุฉ ุนุงูุฉ โ ููุตุฉ ููู",
      "#/intro":"ูู ูุญู โ ููุตุฉ ููู",
      "#/services":"ุงูุฎุฏูุงุช โ ููุตุฉ ููู",
      "#/support":"ุงูุฏุนู ุงูููู โ ููุตุฉ ููู",
      "#/policies":"ุงูุฃุฏูุฉ ูุงูุณูุงุณุงุช โ ููุตุฉ ููู",
      "#/contact":"ุงุชุตู ุจูุง โ ููุตุฉ ููู",
    };
    if (MAP[h]) document.title = MAP[h];
    if (/^#\/acc\//.test(h)) document.title = "ุงูุญุณุงุจ โ ููุตุฉ ููู";
  }

  function route(){
    applyTitle();
    const r = parseRoute();
    if (r.type==="overview") return renderOverview();
    if (r.type==="intro") return renderIntro();
    if (r.type==="services") return renderServices();
    if (r.type==="acc") return renderAccount(r.key, r.tab);
    view.innerHTML = notFound();
  }

  window.addEventListener('hashchange', route);
  window.addEventListener('load', route);
})();

/* ุงุฎุชุตุงุฑ Alt+H/H ููุฑุฆูุณูุฉ + FAB ุธููุฑ */
(function(){
  document.addEventListener('keydown', (e)=>{
    const inInput = /^(INPUT|TEXTAREA|SELECT)$/.test(document.activeElement?.tagName||'');
    if (inInput) return;
    if ((e.altKey && (e.key==='h' || e.key==='H')) || (e.key==='h' || e.key==='H')){
      e.preventDefault(); location.hash = '#/overview';
    }
  });
})();
</script>

</body>
</html>
