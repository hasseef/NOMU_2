<style>
/* ======= Ø£ÙƒÙ…Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª + Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª + Ù…Ø¤Ø´Ø±Ø§Øª KPI (ØªØµÙ…ÙŠÙ… Ø§Ø­ØªØ±Ø§ÙÙŠ Ø®ÙÙŠÙ) ======= */
:root{
  --ink:#0f172a; --muted:#64748b; --border:#e6e9ef;
  --ok:#16a34a; --warn:#f59e0b; --bad:#ef4444; --info:#0ea5e9;
}
/* ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨ */
.acc-tabs{ display:flex; gap:8px; flex-wrap:wrap; margin:12px 0 8px }
.acc-tab{
  padding:10px 12px; border:1px solid var(--border); border-radius:10px;
  background:#fff; cursor:pointer; font-weight:600; color:var(--ink); text-decoration:none;
}
.acc-tab[aria-selected="true"]{ border-color:var(--info); outline:2px solid rgba(14,165,233,.15) }

/* Ø´Ø¨ÙƒØ© KPI */
.kpi-grid{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:12px }
.kpi-card{
  border:1px solid var(--border); border-radius:12px; background:#fff; padding:12px; display:flex; gap:10px; align-items:flex-start
}
.kpi-icon{ font-size:22px; line-height:1; padding:8px; border-radius:10px; background:#f1f5f9 }
.kpi-body{ flex:1; min-width:0 }
.kpi-title{ font-weight:700; color:var(--ink); white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.kpi-meta{ display:flex; gap:10px; align-items:center; margin-top:4px; color:var(--muted); font-size:12px }
.kpi-value{ font-weight:800; font-size:18px; color:var(--ink) }
.badge{ padding:3px 8px; border-radius:999px; font-size:12px; border:1px solid var(--border); background:#fff }
.badge.ok{ color:#065f46; border-color:#bbf7d0; background:#ecfdf5 }
.badge.warn{ color:#92400e; border-color:#fde68a; background:#fffbeb }
.badge.bad{ color:#991b1b; border-color:#fecaca; background:#fef2f2 }
.badge.info{ color:#075985; border-color:#bae6fd; background:#eff6ff }

/* Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª/Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± */
.table{ width:100%; border-collapse:separate; border-spacing:0 8px }
.table th{ text-align:start; font-size:13px; color:var(--muted); padding:0 10px }
.table td{ background:#fff; border:1px solid var(--border); padding:10px; }
.table tr td:first-child{ border-radius:12px 0 0 12px }
.table tr td:last-child{ border-radius:0 12px 12px 0 }

/* Ø¨Ø·Ø§Ù‚Ø§Øª Ø¹Ø§Ù…Ø© */
.card{ border:1px solid var(--border); border-radius:12px; background:#fff; padding:12px }

/* ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬ÙˆØ§Ù„ */
@media (max-width:979px){
  .kpi-grid{ grid-template-columns:1fr 1fr }
  .acc-tabs{ position:sticky; top:60px; background:#fff; padding:8px 0; z-index:20 }
}
</style>

<script>
/* ======= Ø£ÙƒÙ…Ø§Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª + ØªØ¨ÙˆÙŠØ¨Ø§Øª + KPI Ø¬Ø§Ù‡Ø²Ø© ======= */
(function(){
  const view = document.getElementById('view') || document.body;

  // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
  const ACCOUNTS = {
    "health":    { name:"ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØµØ­Ø©", icon:"ğŸ¥" },
    "clinic":    { name:"Ø§Ù„Ù…Ø±Ø§ÙƒØ² Ø§Ù„ØµØ­ÙŠØ©", icon:"ğŸ©º" },
    "education": { name:"ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…", icon:"ğŸ“" },
    "neighborhood": { name:"Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø£Ø­ÙŠØ§Ø¡", icon:"ğŸ˜ï¸" },
    "nonprofit": { name:"Ø§Ù„Ø¬Ù…Ø¹ÙŠØ§Øª", icon:"ğŸ¤" },
    "hr":        { name:"Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©", icon:"ğŸ‘¤" },
    "csr":       { name:"Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø®Ø§Øµ", icon:"ğŸ¢" },
    "family":    { name:"Ø§Ù„Ø£Ø³Ø±Ø©", icon:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§" },
    "admin":     { name:"Ø§Ù„Ù„Ø¬Ù†Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ©", icon:"ğŸ›¡ï¸" },
  };
  const TABS = [
    {key:"summary",   label:"Ù…Ù„Ø®Øµ"},
    {key:"operations",label:"Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"},
    {key:"indicators",label:"Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª"},
    {key:"reports",   label:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"},
    {key:"resources", label:"Ø§Ù„Ù…ÙˆØ§Ø±Ø¯"},
    {key:"governance",label:"Ø§Ù„Ø­ÙˆÙƒÙ…Ø©"},
  ];

  // Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø§ÙØªØ±Ø§Ø¶ÙŠØ© (ØªÙØ³ØªØ®Ø¯Ù… Ø¥Ù† Ù„Ù… ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©)
  const KPI_TITLES = [
    {t:"Ù†Ø³Ø¨Ø© ØªØºØ·ÙŠØ© Ø§Ù„ÙØ­Øµ Ø§Ù„Ù…Ø¨ÙƒØ±",        icon:"ğŸ§ª"},
    {t:"Ø¥ØªÙ…Ø§Ù… Ø§Ù„ØªØ·Ø¹ÙŠÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©",       icon:"ğŸ’‰"},
    {t:"Ø²Ù…Ù† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ØªÙˆØ³Ø· (Ø¯Ù‚ÙŠÙ‚Ø©)",    icon:"â±ï¸"},
    {t:"Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ±ÙŠØ©",   icon:"ğŸ“‹"},
    {t:"Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§ÙƒØªÙ…Ø§Ù„Ù‡Ø§",        icon:"ğŸ“Š"},
    {t:"Ø§Ù„ØªØºØ·ÙŠØ© Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ© Ù„Ù„Ø®Ø¯Ù…Ø§Øª",      icon:"ğŸ—ºï¸"},
    {t:"Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…ØºÙ„Ù‚Ø©",          icon:"ğŸ”"},
    {t:"Ø±Ø¶Ø§ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†",                 icon:"â­"},
    {t:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø®Ø·ÙˆØ±Ø©",     icon:"âš ï¸"},
    {t:"ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¥Ù†ÙØ§Ù‚",                  icon:"ğŸ’°"},
    {t:"Ø§Ù„ØªÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¬Ù‡Ø§Øª",             icon:"ğŸ§©"},
    {t:"Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠ",                 icon:"ğŸŒ±"},
  ];

  // ØªÙˆÙ„ÙŠØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø±Ø¶ÙŠØ© Ù…Ø­Ø³Ù‘Ù†Ø© (ÙŠÙ…ÙƒÙ†Ùƒ Ø±Ø¨Ø·Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¨Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„ÙØ¹Ù„ÙŠØ©)
  function makeDemoKPIs(){
    return KPI_TITLES.map((k, i)=>{
      // Ù‚ÙŠÙ… ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…Ù†Ø·Ù‚ÙŠØ©
      let v, unit = "";
      if (k.t.includes("Ø²Ù…Ù† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±")) { v = 5 + Math.floor(Math.random()*20); unit="Ø¯"; }
      else if (k.t.includes("Ø­Ø§Ù„Ø§Øª Ø¹Ø§Ù„ÙŠØ©")) { v = (3 + Math.random()*7).toFixed(1); unit="%"; }
      else if (k.t.includes("ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¥Ù†ÙØ§Ù‚")) { v = (80 + Math.random()*15).toFixed(0); unit="%"; }
      else if (k.t.includes("Ø±Ø¶Ø§") || k.t.includes("Ø§Ù„ØªØ²Ø§Ù…") || k.t.includes("Ø¬ÙˆØ¯Ø©") || k.t.includes("Ø§Ù„ØªÙƒØ§Ù…Ù„") || k.t.includes("Ø§Ù„ÙØ­Øµ") || k.t.includes("Ø§Ù„ØªØ·Ø¹ÙŠÙ…Ø§Øª") || k.t.includes("Ø§Ù„ØªØºØ·ÙŠØ©") || k.t.includes("Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª") || k.t.includes("Ø§Ù„Ø£Ø«Ø±")) {
        v = (70 + Math.random()*25).toFixed(0); unit="%";
      } else { v = (50 + Math.random()*40).toFixed(0); unit="%"; }
      const num = typeof v === "number" ? v : parseFloat(v);
      let grade = "info";
      if (unit==="%"){
        if (num >= 85) grade="ok";
        else if (num >= 70) grade="warn";
        else grade="bad";
      } else if (k.t.includes("Ø²Ù…Ù† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±")){
        if (num <= 10) grade="ok";
        else if (num <= 20) grade="warn";
        else grade="bad";
      }
      return { title:k.t, icon:k.icon, value: v + (unit||""), trend: (Math.random()>.5?"+":"-") + (Math.random()*5|0) + "%", grade };
    });
  }

  // Ù‚Ø§Ù„Ø¨ ØµÙØ­Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
  function renderAccount(accKey, tabKey){
    const acc = ACCOUNTS[accKey];
    if (!acc){ view.innerHTML = notFound(); return; }
    const currentTab = TABS.find(t=>t.key===tabKey) ? tabKey : "summary";

    let html = `
      <div class="card" style="display:flex;justify-content:space-between;align-items:center;gap:10px">
        <div style="display:flex;align-items:center;gap:10px">
          <div class="kpi-icon" aria-hidden="true" style="font-size:24px">${acc.icon}</div>
          <div>
            <div style="font-weight:800">${acc.name}</div>
            <div style="color:var(--muted);font-size:13px">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø­Ø³Ø§Ø¨ Â· ØªØ¨ÙˆÙŠØ¨: <b>${TABS.find(t=>t.key===currentTab).label}</b></div>
          </div>
        </div>
        <a class="btn ghost" href="#/reports">Ø§Ø®ØªØµØ§Ø± Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ±</a>
      </div>
      <nav class="acc-tabs" role="tablist" aria-label="ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨">`+
        TABS.map(t=>`<a class="acc-tab" role="tab" aria-selected="${t.key===currentTab}" href="#/acc/${accKey}?tab=${t.key}">${t.label}</a>`).join("")+
      `</nav>
      <div id="accContent"></div>
    `;
    view.innerHTML = html;

    // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
    const mount = document.getElementById('accContent');
    if (currentTab==="summary"){
      const kpis = makeDemoKPIs().slice(0,8); // Ù¨ Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù„Ù…Ù„Ø®Øµ
      mount.innerHTML = `
        <div class="kpi-grid">
          ${kpis.map(k=>`
            <div class="kpi-card">
              <div class="kpi-icon">${k.icon}</div>
              <div class="kpi-body">
                <div class="kpi-title" title="${k.title}">${k.title}</div>
                <div class="kpi-meta">
                  <span class="kpi-value">${k.value}</span>
                  <span class="badge ${k.grade}">${gradeLabel(k.grade)}</span>
                  <span class="badge info">Ø§Ù„Ù…Ø¯Ù‰: 30ÙŠ</span>
                  <span class="badge">${k.trend}</span>
                </div>
              </div>
            </div>`).join("")}
        </div>
        <div class="card" style="margin-top:12px">
          <b>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹</b>
          <ul style="margin:6px 0 0 0;padding-inline-start:18px;color:var(--muted);font-size:14px">
            <li>Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø· â€” Ø§Ø±Ø¨Ø·Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¨Ù…ØµØ¯Ø± Ø¨ÙŠØ§Ù†Ø§ØªÙƒ.</li>
            <li>Ø§Ù„Ø´Ø§Ø±Ø§Øª ØªØ¹ÙƒØ³ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ø¬ÙŠØ¯/ØªØ­Ø°ÙŠØ±/Ø­Ø±ÙØ¬) Ø¢Ù„ÙŠÙ‹Ø§ ÙˆÙÙ‚ Ø§Ù„Ù‚ÙŠÙ…Ø©.</li>
          </ul>
        </div>`;
    }
    else if (currentTab==="operations"){
      mount.innerHTML = `
        <div class="card"><b>Ø£Ø¹Ù…Ø§Ù„ Ø¬Ø§Ø±ÙŠØ©</b>
          <ul style="margin:8px 0 0 0;padding-inline-start:18px">
            <li>ØªÙØ¹ÙŠÙ„ Ø­Ù…Ù„Ø© Ø§Ù„ÙØ­Øµ Ø§Ù„Ù…Ø¨ÙƒØ± ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø°Ø§Øª Ø§Ù„ØªØºØ·ÙŠØ© Ø§Ù„Ù…Ù†Ø®ÙØ¶Ø©</li>
            <li>Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ø³Ø§Ø± Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø¬Ù‡Ø© ÙˆØ§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª Ø§Ù„Ø·Ø±ÙÙŠØ©</li>
            <li>Ø¥Ø·Ù„Ø§Ù‚ Ù„ÙˆØ­Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ø²Ù…Ù† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</li>
          </ul>
        </div>`;
    }
    else if (currentTab==="indicators"){
      const kpis = makeDemoKPIs(); // Ù¡Ù¢ Ù…Ø¤Ø´Ø±
      mount.innerHTML = `
        <table class="table">
          <thead><tr>
            <th>Ø§Ù„Ù…Ø¤Ø´Ø±</th><th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th><th>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</th><th>Ø§Ù„Ø§ØªØ¬Ø§Ù‡</th><th>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</th>
          </tr></thead>
          <tbody>
            ${kpis.map(k=>`
              <tr>
                <td>${k.title}</td>
                <td><b>${k.value}</b></td>
                <td><span class="badge ${k.grade}">${gradeLabel(k.grade)}</span></td>
                <td><span class="badge">${k.trend}</span></td>
                <td><span class="badge info">Ø§Ù„ÙŠÙˆÙ…</span></td>
              </tr>`).join("")}
          </tbody>
        </table>`;
    }
    else if (currentTab==="reports"){
      mount.innerHTML = `
        <div class="card"><b>ØªÙ‚Ø§Ø±ÙŠØ± Ù…ØªØ§Ø­Ø©</b>
          <div style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px">
            ${["ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ù‡Ø±ÙŠ","ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„","ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª ÙˆØ§Ù„Ø§Ù†ØªØ¸Ø§Ø±"].map(t=>`
              <a class="card" href="#" onclick="return false" style="text-decoration:none;color:var(--ink)">${t}<br><span style="color:var(--muted);font-size:12px">PDF Â· Ø¢Ø®Ø± Ø¥ØµØ¯Ø§Ø±</span></a>
            `).join("")}
          </div>
        </div>`;
    }
    else if (currentTab==="resources"){
      mount.innerHTML = `
        <div class="card"><b>Ø§Ù„Ù…ÙˆØ§Ø±Ø¯</b>
          <ul style="margin:8px 0 0 0;padding-inline-start:18px">
            <li><a href="#/policies">Ø§Ù„Ø£Ø¯Ù„Ø© ÙˆØ§Ù„Ø³ÙŠØ§Ø³Ø§Øª</a></li>
            <li><a href="#/support">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</a></li>
            <li><a href="#/contact">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
          </ul>
        </div>`;
    }
    else if (currentTab==="governance"){
      mount.innerHTML = `
        <div class="card"><b>Ø§Ù„Ø­ÙˆÙƒÙ…Ø© ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Ø±</b>
          <p style="color:var(--muted)">ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª ÙˆØ§Ù„Ù†Ø·Ø§Ù‚Ø§Øª ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù„ÙƒÙ„ Ø¬Ù‡Ø© Ø¶Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨.</p>
          <ul style="margin:8px 0 0 0;padding-inline-start:18px">
            <li>Ù…Ø§Ù„Ùƒ Ø§Ù„Ø­Ø³Ø§Ø¨</li>
            <li>Ù…Ø´Ø±Ù Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</li>
            <li>Ù…Ù†Ø³Ù‚ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</li>
            <li>Ø¯Ø¹Ù… ÙÙ†ÙŠ</li>
          </ul>
        </div>`;
    }
  }

  // Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
  function gradeLabel(g){
    if (g==="ok") return "Ø¬ÙŠØ¯";
    if (g==="warn") return "ØªØ­Ø°ÙŠØ±";
    if (g==="bad") return "Ø­Ø±ÙØ¬";
    return "Ù…Ø¹Ù„ÙˆÙ…Ø©";
  }
  function notFound(){
    return '<div class="card" style="padding:16px"><h2>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©</h2><p>ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ùˆ Ø§Ø®ØªØ± ØµÙØ­Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.</p></div>';
  }
  function parseRoute(){
    const h = location.hash || "";
    // Ø£Ù…Ø«Ù„Ø©: #/acc/health?tab=summary
    const m = h.match(/^#\/acc\/([^?]+)(?:\?tab=([a-z]+))?/);
    if (m) return {type:"acc", key:m[1], tab:m[2] || "summary"};
    return null;
  }

  // Ù…Ø¨Ø¯Ù‘Ù„ Ø§Ù„Ø±Ø§ÙˆØªØ±
  function onRoute(){
    const r = parseRoute();
    if (r && r.type==="acc") renderAccount(r.key, r.tab);
  }

  window.addEventListener("hashchange", onRoute);
  window.addEventListener("load", onRoute);
})();
</script>
