<script>
/* ========= ุชุฑููุฉ ุชูุงุนููุฉ: ูุคุดุฑุงุช ูุฎุฏูุงุช ูุฎุตูุตุฉ + ุฏุนู/ุงุชุตุงู/ุณูุงุณุงุช ========= */

/* 1) ุชุนุฑูู ุงูุฎุฏูุงุช ุงููุฎุตูุตุฉ ููู ุญุณุงุจ */
window.ACCOUNT_SERVICES = {
  health: [
    {t:"ููู ุงูุทูู ุงูุตุญู ุงูููุญูุฏ", d:"ุฌูุน ุงูุณุฌู ุงูุตุญู ูุงูุชุทุนููุงุช ูุงููุญูุต ูู ููู ูุงุญุฏ."},
    {t:"ูุธุงู ุชุชุจูุน ุงูุชุทุนููุงุช", d:"ุชูุจููุงุช ููุงุนูุฏ ุงูุชุทุนูู ูุฑุจุท ูุน ุงูุนูุงุฏุงุช."},
    {t:"ููุญุฉ ุงูุฃูุฑุงุถ ุงููุฒููุฉ ููุฃุทูุงู", d:"ูุชุงุจุนุฉ ุงูุญุงูุงุช ุทูููุฉ ุงูุฃูุฏ ูุฅุฏุงุฑุฉ ุงูุฎุทุฉ ุงูุนูุงุฌูุฉ."},
    {t:"ุชูุงูู ุงูุณุฌู ุงูุฅููุชุฑููู", d:"ุชูุงูู ูุน ุฃูุธูุฉ HIS/EHR ูู ุงููุณุชุดููุงุช ูุงููุฑุงูุฒ."},
    {t:"ุฅุญุงูุฉ ุฐููุฉ", d:"ูุณุงุฑุงุช ุฅุญุงูุฉ ุจูู ุงููุณุชุดูู ูุงูุนูุงุฏุฉ ูุงููุฌุชูุน."},
  ],
  clinic: [
    {t:"ุญุฌุฒ ุงูููุงุนูุฏ ุงูููุญุฏ", d:"ุฅุฏุงุฑุฉ ุงูุทุงูุฉ ุงูุงุณุชูุนุงุจูุฉ ูุฌุฏููุฉ ุงูุฒูุงุฑุงุช."},
    {t:"ุณุฌูุงุช ุงูููู ูุงูุชุบุฐูุฉ", d:"ูุชุงุจุนุฉ ุงููุฒู ูุงูุทูู ููุคุดุฑุงุช ุงูุชุบุฐูุฉ."},
    {t:"ุฅุฏุงุฑุฉ ุงูุฅุญุงูุงุช", d:"ุฅุฑุณุงู/ุงุณุชูุจุงู ุงูุฅุญุงูุงุช ูุฅุบูุงููุง ุฒูููุงู."},
    {t:"ุฌูุฏุฉ ุงูุฎุฏูุฉ ุงูููููุฉ", d:"ูุชุงุจุนุฉ ุงูุงูุชุฒุงู ูุงููุนุงููุฑ ุงูุชุดุบูููุฉ."},
    {t:"ุชูุจููุงุช ุงูุทูุงุฑุฆ", d:"ุชูุจููุงุช ุนุงุฌูุฉ ูููุฑู ุงูุทุจูุฉ."},
  ],
  education: [
    {t:"ุชุญุตูู ูุจูุฑ ูุฑูุงุถ ุงูุฃุทูุงู", d:"ููุงุณ ุงูุชูุฏูู ุงููุบูู ูุงููุนุฑูู ูุงูุณูููู."},
    {t:"ุฌุงูุฒูุฉ ูุฏุฑุณูุฉ", d:"ุงุฎุชุจุงุฑุงุช ูุนูุงุฑูุฉ ููุงูุชูุงู ููุตู ุงูุฃูู."},
    {t:"ุชูุงูู ุตุญู-ุชุนูููู", d:"ุฑุจุท ุงูุนูุงูู ุงูุตุญูุฉ ุงููุคุซุฑุฉ ุนูู ุงูุฃุฏุงุก."},
    {t:"ูุงุนุฏุฉ ุฐูู ุงูุงุญุชูุงุฌุงุช", d:"ุฎุทุท ุฏุนู ูุฑุฏูุฉ ูุชุชุจุน ุงูุชุญุณูู."},
    {t:"ููุงูุฌ ุฑูููุฉ ูุจูุฑุฉ", d:"ูุตุงุฏุฑ ุชูุงุนููุฉ ูุชูููุฉ ููุงุฑุงุช."},
  ],
  neighborhood: [
    {t:"ุงูุชูุนูุฉ ุงูุฃุณุฑูุฉ", d:"ุจุฑุงูุฌ ููุงูุฉ ูุชุฑุจูุฉ ุฅูุฌุงุจูุฉ."},
    {t:"ุฃูุดุทุฉ ูุฌุชูุนูุฉ", d:"ุชุณุฌูู ููุชุงุจุนุฉ ุงููุนุงููุงุช ูุงูุญุถูุฑ."},
    {t:"ุชูุงูู ูุน ุงูุฌูุนูุงุช", d:"ุฅุณูุงุฏ ุงูุญุงูุงุช ุงูุงุฌุชูุงุนูุฉ ุณุฑูุนุงู."},
    {t:"ููุญุฉ ุงููุดุงุฑูุฉ", d:"ูุคุดุฑุงุช ูุดุงุฑูุฉ ุงูุฃุณุฑุฉ ูุงูุทูู."},
  ],
  nonprofit: [
    {t:"ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน ุงูุชููููุฉ", d:"ุงูุชุฎุทูุทุ ุงูุชูููุฐุ ุงูุชูููู."},
    {t:"ุชุจุฑุนุงุช ููุฌููุฉ", d:"ุชูุฌูู ุงูุฏุนู ุญุณุจ ุงูุงุญุชูุงุฌ ุงููุนูู."},
    {t:"ุฅุฏุงุฑุฉ ุงููุชุทูุนูู", d:"ุงุฎุชูุงุฑุ ุชุฏุฑูุจุ ุชุชุจุน ุณุงุนุงุช ุงูุชุทูุน."},
    {t:"ุชูุงูู ุชูุงุฑูุฑ", d:"ุฑูุน ุชูุงุฑูุฑ ููุญูุฏุฉ ููุฌูุงุช ุงูุญููููุฉ."},
    {t:"ููุงุณ ุงูุฃุซุฑ", d:"ููุงุฐุฌ ููุทููุฉ ููุคุดุฑุงุช ุชุฃุซูุฑ."},
  ],
  mhrsd: [
    {t:"ุจุฑุงูุฌ ุงูุฑุนุงูุฉ ููุฃุณุฑ", d:"ุงุณุชุญูุงูุงุช ูุฏุนู ููุฌูู."},
    {t:"ุชุชุจูุน ุงูุฃุทูุงู ุงููุนุฑุถูู ููุฎุทุฑ", d:"ุงูุชุดุงู ูุจูุฑ ูุชุฏุฎู ูุชุนุฏุฏ ุงูุฌูุงุช."},
    {t:"ุชูุงูู ุงูุญุงูุงุช", d:"ุฑุจุท ุตุญู/ุชุนูููู/ุงุฌุชูุงุนู ูุญุงูุฉ ุงูุฃุณุฑุฉ."},
    {t:"ุฏุนู ุงูุฃุณุฑ ุงูุญุงุถูุฉ", d:"ุฎุฏูุงุช ุงูุฅุณูุงุฏ ูุงูุชูููู ูุงููุชุงุจุนุฉ."},
    {t:"ููุงุณ ุฌูุฏุฉ ุงูุฎุฏูุงุช ุงูุงุฌุชูุงุนูุฉ", d:"ูุนุงููุฑ ุงูุชุซุงู ูุชุฏููู ุฏูุฑู."},
  ],
  csr: [
    {t:"ุจูุงุจุฉ ุงููุณุคูููุฉ ุงูุงุฌุชูุงุนูุฉ", d:"ุฅุฏุงุฑุฉ ุงููุจุงุฏุฑุงุช ูุงูุชูููู."},
    {t:"ููุญ ููุจุงุฏุฑุงุช", d:"ุชูุฏููุ ุชููููุ ุชุชุจุน ุงููุชุงุฆุฌ."},
    {t:"ููุญุฉ ูุคุดุฑุงุช CSR", d:"ุดูุงููุฉ ุงูุฃุซุฑ ูุงูุฃูุฏุงู."},
    {t:"ุชูุงูู ุนุฑุถ ุงูุจุฑุงูุฌ", d:"ุฅุจุฑุงุฒ ุงูุจุฑุงูุฌ ุงูููููุฉ ุนูู ุงูููุตุฉ."},
  ],
  family: [
    {t:"ุชุทุจูู ููู ุทููู", d:"ูุชุงุจุนุฉ ุงูููู ูุงูุชุบุฐูุฉ ูุงูููุงุญุงุช."},
    {t:"ุชูุนูุฉ ุฑูููุฉ ูููุงูุฏูู", d:"ููุงูุงุชุ ููุฏูููุงุชุ ุงุฎุชุจุงุฑุงุช ูุตูุฑุฉ."},
    {t:"ููุงุนูุฏ ูุน ูุฎุชุตูู", d:"ุตุญุฉ/ุชุนููู/ุงุฌุชูุงุนู ูู ููุงู ูุงุญุฏ."},
    {t:"ุงุณุชุดุงุฑุงุช ุชุฑุจููุฉ ููุฑูุฉ", d:"ุฃุณุฆูุฉ ุณุฑูุนุฉ ูุฅุฌุงุจุงุช ููุซููุฉ."},
    {t:"ุณุฌู ุงูุชุทูุฑ ุงูุณูููู", d:"ุชูุซูู ุงูุชูุฏู ุงููุบูู ูุงูุณูููู."},
  ],
  admin: [
    {t:"ุญูููุฉ ูุทููุฉ", d:"ุณูุงุณุงุช ุชูุงูู ุจูู ุงูุฌูุงุช."},
    {t:"ูุฑูุฒ ุจูุงูุงุช ูุทูู", d:"ุงุชูุณุงู ููุดุงุฑูุฉ ุขููุฉ."},
    {t:"ูุฑุงูุจุฉ ุงููุคุดุฑุงุช ุงูุงุณุชุฑุงุชูุฌูุฉ", d:"ููุญุงุช ูุชุงุจุนุฉ ุขููุฉ."},
    {t:"ุชุญูููุงุช ูุฐูุงุก ุงุตุทูุงุนู", d:"ุชูุจุคุงุชุ ุชุญุฐูุฑุงุช ูุจูุฑุฉ."},
    {t:"ุฅุฏุงุฑุฉ ุงูุดุฑุงูุงุช", d:"ุงุชูุงููุงุช ูุชูุงุฑูุฑ ูุทููุฉ."},
  ],
};

/* 2) ูุคุดุฑุงุช ูุฎุตูุตุฉ ููู ุญุณุงุจ (ุนูุงููู ููุท โ ุงูููู ุชููููุฏ ุชุฌุฑูุจูุงู ุงูุขู) */
window.ACCOUNT_KPIS = {
  health: [
    "ุฅุชูุงู ุงูุชุทุนููุงุช ุงูุฃุณุงุณูุฉ","ุงููุญุต ุงููุจูุฑ ุงูููุชูู","ุฒูู ุงูุชุธุงุฑ ุงูุทูุงุฑุฆ (ุฏ)","ูุชุงุจุนุฉ ุงูุฃูุฑุงุถ ุงููุฒููุฉ","ุฑุถุง ุฃูููุงุก ุงูุฃููุฑ"
  ],
  clinic: [
    "ุงูููุงุนูุฏ ุงููุญุฌูุฒุฉ ุฅููุชุฑูููุงู","ุงูุฅุญุงูุงุช ุงููุบููุฉ < 7 ุฃูุงู","ุฑุถุง ุงููุณุชููุฏูู ุงููููู","ุฒูู ุชูุฏูู ุฃูู ุฎุฏูุฉ (ุฏ)","ุงูุชุฒุงู ุงูุฒูุงุฑุงุช ุงูููุงุฆูุฉ"
  ],
  education: [
    "ุงูุงูุชุญุงู ุจุฑูุงุถ ุงูุฃุทูุงู","ุฌุงูุฒูุฉ ูุฏุฑุณูุฉ (ูุคุดุฑ)","ุชุฏุฑูุจ ูุนููู ุงูุทูููุฉ","ุงูุชูุงู ูุงุฌุญ ููุตู ุงูุฃูู","ูุจุงุฏุฑุงุช ุชูุงูููุฉ ุตุญูุฉ/ุงุฌุชูุงุนูุฉ"
  ],
  neighborhood: [
    "ูุนุงููุงุช ูุฌุชูุนูุฉ ููููุฐุฉ/ุดูุฑ","ูุดุงุฑูุฉ ุฃุณุฑูุฉ ูู ุงูุชูุนูุฉ","ูุดุงุฑูุฉ ุฃุทูุงู ุจุงูุฃูุดุทุฉ","ุฑุถุง ุงููุฌุชูุน","ุชูุณูู ูุน ุงูุฌูุงุช"
  ],
  nonprofit: [
    "ุนุฏุฏ ุงูุจุฑุงูุฌ ููุฃุทูุงู","ุงูุฏุนู ุงููุงูู/ุงูุนููู","ุชุญูู ุฃุซุฑ ูุฌุชูุนู","ูุชุทูุนูู ูุดุทูู","ุดูุงููุฉ ุงูุชูุงุฑูุฑ"
  ],
  mhrsd: [
    "ุฃุณุฑ ูุณุชููุฏุฉ","ูุนุงูุฌุฉ ุงูุจูุงุบุงุช ุจุงููุฏุฉ","ุฑุถุง ุงููุณุชููุฏูู ุงูุงุฌุชูุงุนู","ุชูุณูู ุจูู ุงูุฌูุงุช","ุงูููุงูุฉ ูู ุงูุนูู ุงูุฃุณุฑู"
  ],
  csr: [
    "ุจุฑุงูุฌ ููููุฉ","ุฅุฌูุงูู ุงููุณุงููุงุช","ุดูุงููุฉ ุงูุชูุงุฑูุฑ","ูุดุงุฑูุฉ ุจุงููุจุงุฏุฑุงุช ุงูุญููููุฉ","ุงูุฃุซุฑ ุงูุงุฌุชูุงุนู"
  ],
  family: [
    "ุชูุงุนู ุงูุฃุณุฑ","ุฒูุงุฑุงุช/ุฃุณุฑุฉ/ุดูุฑ","ูููุงุช ููู ููุชููุฉ","ุฑุถุง ุงููุณุชุฎุฏููู","ุชุญุณู ูุคุดุฑุงุช ููู ุงูุฃุทูุงู"
  ],
  admin: [
    "ุฌูุงุช ูุชูุงููุฉ ูุทููุงู","ูุคุดุฑุงุช ูุญุฏูุซุฉ ุขููุงู","ุงูุงูุชุฒุงู ุจุณูุงุณุงุช ุงูุจูุงูุงุช","ุณุฑุนุฉ ุชูุงุฑูุฑ ูุทููุฉ","ุงูุฃุซุฑ ุนูู ุฃูุฏุงู 2030"
  ],
};

/* 3) ููููุฏุงุช ุนุฑุถ: ุฎุฏูุงุช + ูุคุดุฑุงุช */
function servicesGrid(items){
  return '<div class="services-grid">'+ items.map(s=>`
    <div class="service"><h4>${s.t}</h4><p>${s.d}</p></div>`).join('') + '</div>';
}
function makeDemoKPIsFromList(list){
  function grade(num, kind){ if(kind==="wait"){ if(num<=10)return"ok"; if(num<=20)return"warn"; return"bad"; } return num>=85?"ok": num>=70?"warn":"bad"; }
  function label(g){ return g==="ok"?"ุฌูุฏ":g==="warn"?"ุชุญุฐูุฑ":"ุญุฑูุฌ"; }
  return list.map(t=>{
    let v=0, unit="%", g="info";
    if (/ุงูุชุธุงุฑ|ุฏ\)/.test(t)) { v = 5 + Math.floor(Math.random()*20); unit="ุฏ"; g = grade(v,"wait"); }
    else { v = +(70 + Math.random()*25).toFixed(0); g = grade(v); }
    const trend = (Math.random()>.5?"+":"-") + (Math.random()*5|0) + "%";
    return {title:t, icon:"๐", value: v + unit, grade:g, gradeLabel:label(g), trend};
  });
}

/* 4) ุฅุนุงุฏุฉ ุชุนุฑูู renderAccount ูุชูุนูู ุงูููุงุฆู ุงููุฎุตูุตุฉ (ุชุฌุงูุฒ ูุทูู ููุฃุตู) */
(function(){
  const _old = window.renderAccount;
  window.renderAccount = function(accKey, tabKey){
    const accs = window.ACCOUNTS || {}; // ูู ูููู ุงูุฃุตูู
    const acc = accs[accKey];
    const TABS = window.TABS || [
      {key:"summary",label:"ุงูููุฎุต"},{key:"services",label:"ุงูุฎุฏูุงุช ูุงูุชูููุงุช"},{key:"operations",label:"ุงูุนูููุงุช"},
      {key:"indicators",label:"ุงููุคุดุฑุงุช"},{key:"reports",label:"ุงูุชูุงุฑูุฑ"},{key:"resources",label:"ุงูููุงุฑุฏ"},{key:"governance",label:"ุงูุญูููุฉ"}
    ];
    if (!acc){ return (typeof _old==="function"?_old(accKey, tabKey):null); }
    const view = document.getElementById('view');
    const current = (TABS.find(t=>t.key===tabKey)||TABS[0]).key;

    view.innerHTML = `
      <div class="card" style="display:flex;justify-content:space-between;align-items:center;gap:10px">
        <div style="display:flex;align-items:center;gap:10px">
          <div class="kpi-icon" style="font-size:24px">${acc.icon||"๐งฉ"}</div>
          <div><div style="font-weight:800">${acc.name}</div>
            <div style="color:#64748b;font-size:13px">ููุญุฉ ุชุญูู ุงูุญุณุงุจ ยท ุชุจููุจ: <b>${(TABS.find(t=>t.key===current)||{}).label||""}</b></div>
          </div>
        </div>
        <a class="btn ghost" href="#/services">ูุชุงููุฌ ุงูุฎุฏูุงุช</a>
      </div>
      <nav class="tabs" role="tablist" aria-label="ุชุจููุจุงุช ุงูุญุณุงุจ">
        ${TABS.map(t=>`<a class="tab" role="tab" aria-selected="${t.key===current}" href="#/acc/${accKey}?tab=${t.key}">${t.label}</a>`).join('')}
      </nav>
      <div id="accContent"></div>`;

    const mount = document.getElementById('accContent');

    if (current==="summary"){
      const data = makeDemoKPIsFromList(window.ACCOUNT_KPIS[accKey] || (window.KPI_TITLES||[]).map(x=>x.t).slice(0,8));
      mount.innerHTML = `<div class="kpi-grid">${data.map(k=>`
        <div class="kpi-card">
          <div class="kpi-icon">๐</div>
          <div><div class="kpi-title">${k.title}</div>
            <div class="kpi-meta"><span class="kpi-value">${k.value}</span>
              <span class="badge ${k.grade}">${k.gradeLabel}</span>
              <span class="badge info">${k.trend}</span>
            </div></div>
        </div>`).join('')}</div>`;
    }

    if (current==="services"){
      const scoped = window.ACCOUNT_SERVICES[accKey] || [];
      const common = (window.GLOBAL_SERVICES||[]);
      mount.innerHTML = `
        <div class="toolbar">
          <input id="svcSearch_acc" class="input" placeholder="ุงุจุญุซ ูู ุฎุฏูุงุช ${acc.name}...">
          <button class="btn ghost" id="svcReset_acc">ูุณุญ</button>
        </div>
        <div id="svcGrid_acc" class="services-grid">
          ${servicesGrid(scoped.concat(common)).replace(/^<div class="services-grid">|<\/div>$/g,'')}
        </div>`;
      const filter = (q)=> {
        document.querySelectorAll('#svcGrid_acc .service').forEach(it=>{
          const hit = it.textContent.toLowerCase().includes(q.toLowerCase());
          it.style.display = hit ? 'block' : 'none';
        });
      };
      document.getElementById('svcSearch_acc').oninput = (e)=> filter(e.target.value);
      document.getElementById('svcReset_acc').onclick = ()=>{ document.getElementById('svcSearch_acc').value=''; filter(''); };
    }

    if (current==="operations"){
      mount.innerHTML = `<div class="card"><b>ุงูุนูููุงุช ุงูุฌุงุฑูุฉ</b>
        <ul style="margin:8px 0 0 0;padding-inline-start:18px">
          <li>ุญููุฉ ูุญุต ูุจูุฑ</li><li>ุชุญุณูู ูุณุงุฑ ุงูุฅุญุงูุงุช</li><li>ูุชุงุจุนุฉ ุฒูู ุงูุงูุชุธุงุฑ</li>
        </ul>
        <div class="toolbar" style="margin-top:10px">
          <input id="newOp_${accKey}" class="input" placeholder="ุฃุถู ูููุฉ ุชุดุบูููุฉ...">
          <button class="btn" id="addOp_${accKey}">ุฅุถุงูุฉ</button>
        </div>
        <div id="opList_${accKey}"></div>
      </div>`;
      const list = document.getElementById(`opList_${accKey}`);
      document.getElementById(`addOp_${accKey}`).onclick = ()=>{
        const inp = document.getElementById(`newOp_${accKey}`); const v = inp.value.trim(); if(!v) return;
        const row = document.createElement('div'); row.className='card'; row.style.marginTop='8px';
        row.innerHTML = `<div style="display:flex;justify-content:space-between;gap:8px"><span>${v}</span><button class="btn ghost">ุชู</button></div>`;
        row.querySelector('button').onclick = ()=> row.remove(); list.appendChild(row); inp.value='';
      };
    }

    if (current==="indicators"){
      const data = makeDemoKPIsFromList(window.ACCOUNT_KPIS[accKey] || []);
      mount.innerHTML = `<table class="table">
        <thead><tr>
          <th data-k="title">ุงููุคุดุฑ</th><th data-k="value">ุงููููุฉ</th>
          <th data-k="grade">ุงูุชูููู</th><th data-k="trend">ุงูุงุชุฌุงู</th><th>ุขุฎุฑ ุชุญุฏูุซ</th>
        </tr></thead>
        <tbody>${data.map(k=>`
          <tr>
            <td>${k.title}</td>
            <td><b>${k.value}</b></td>
            <td><span class="badge ${k.grade}">${k.gradeLabel}</span></td>
            <td><span class="badge info">${k.trend}</span></td>
            <td><span class="badge">ุงูููู</span></td>
          </tr>`).join('')}</tbody>
      </table>`;
      // ูุฑุฒ ุณุฑูุน
      document.querySelectorAll('#accContent th[data-k]').forEach(th=>{
        let asc=true;
        th.addEventListener('click', ()=>{
          const k = th.dataset.k;
          const idx = {title:0,value:1,grade:2,trend:3}[k];
          const rows = Array.from(document.querySelectorAll('#accContent tbody tr'));
          rows.sort((a,b)=>{
            const A = a.children[idx].textContent.trim(); const B = b.children[idx].textContent.trim();
            return asc ? A.localeCompare(B,'ar') : B.localeCompare(A,'ar');
          }).forEach(r=> r.parentNode.appendChild(r));
          asc=!asc;
        });
      });
    }

    if (current==="reports"){
      mount.innerHTML = `<div class="services-grid" style="grid-template-columns:repeat(3,minmax(0,1fr))">
        ${["ุงูุฃุฏุงุก ุงูุดูุฑู","ุงูุฌูุฏุฉ ูุงูุงูุชุซุงู","ุงูุฅุญุงูุงุช ูุงูุงูุชุธุงุฑ","ุงูุชุบุทูุฉ ุงูุฌุบุฑุงููุฉ","ุงูุฃุซุฑ ุงููุฌุชูุนู","ููุงุกุฉ ุงูุฅููุงู"].map(t=>`
          <a class="service" href="#" onclick="return false" style="text-decoration:none">
            <h4>ุชูุฑูุฑ ${t}</h4><p>PDF ยท ุขุฎุฑ ุฅุตุฏุงุฑ</p>
          </a>`).join('')}
      </div>`;
    }

    if (current==="resources"){
      mount.innerHTML = `<div class="card"><b>ุงูููุงุฑุฏ</b>
        <ul style="margin:8px 0 0 0;padding-inline-start:18px">
          <li><a href="#/policies">ุงูุฃุฏูุฉ ูุงูุณูุงุณุงุช</a></li>
          <li><a href="#/support">ุงูุฏุนู ุงูููู</a></li>
          <li><a href="#/contact">ุงุชุตู ุจูุง</a></li>
        </ul></div>`;
    }

    if (current==="governance"){
      mount.innerHTML = `<div class="card"><b>ุงูุญูููุฉ ูุงูุฃุฏูุงุฑ</b>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
          <div class="card" style="border-style:dashed"><b>ุงูุฃุฏูุงุฑ</b>
            <ul style="margin:6px 0 0 0;padding-inline-start:18px">
              <li>ูุงูู ุงูุญุณุงุจ</li><li>ูุดุฑู ุงููุคุดุฑุงุช</li><li>ููุณู ุงูุชูุงุฑูุฑ</li><li>ุฏุนู ููู</li>
            </ul>
          </div>
          <div class="card" style="border-style:dashed"><b>ุณูุงุณุงุช ุงูุจูุงูุงุช</b>
            <ul style="margin:6px 0 0 0;padding-inline-start:18px">
              <li>ุฃูู ุตูุงุญูุฉ</li><li>ุฅุฎูุงุก ุงููููุฉ</li><li>ุชุฏููู ุงูุฏุฎูู ูุงูุชุบููุฑุงุช</li>
            </ul>
          </div>
        </div></div>`;
    }
  };
})();

/* 5) ุชูุนูู ุตูุญุงุช ุงูุฏุนู/ุงูุณูุงุณุงุช/ุงุชุตู ุจูุง (ูู ุฏูู ุชุนุฏูู ุงูุฑุงูุชุฑ ุงูุฃุตูู) */
(function(){
  const view = document.getElementById('view');
  function renderSupport(){
    view.innerHTML = `<div class="card"><h2>ุงูุฏุนู ุงูููู</h2>
      <p style="color:#64748b">ููุทูุงุฑุฆ ุงูุชุดุบูููุฉ ุฃู ุงููุดุงูู ุงูุชูููุฉ.</p>
      <div class="toolbar">
        <input id="ticketTitle" class="input" placeholder="ุนููุงู ุงูุทูุจ">
        <button class="btn" id="openTicket">ุฅุฑุณุงู</button>
      </div>
      <div id="tickets" class="card" style="margin-top:10px;border-style:dashed">ูุง ุชูุฌุฏ ุชุฐุงูุฑ ุจุนุฏ.</div>
    </div>`;
    const box = document.getElementById('tickets');
    document.getElementById('openTicket').onclick = ()=>{
      const t = document.getElementById('ticketTitle').value.trim(); if(!t) return;
      if (box.textContent.includes('ูุง ุชูุฌุฏ')) box.textContent = '';
      const row = document.createElement('div'); row.className='card'; row.style.marginTop='8px';
      row.innerHTML = `<div style="display:flex;justify-content:space-between;gap:8px"><span>${t}</span><span class="badge info">ุฌุฏูุฏ</span></div>`;
      box.appendChild(row); document.getElementById('ticketTitle').value='';
    };
  }
  function renderPolicies(){
    view.innerHTML = `<div class="card"><h2>ุงูุฃุฏูุฉ ูุงูุณูุงุณุงุช</h2>
      <ul style="margin:8px 0 0 0;padding-inline-start:18px">
        <li>ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ูุญูุงูุฉ ุงูุจูุงูุงุช</li>
        <li>ุณูุงุณุฉ ูุดุงุฑูุฉ ุงูุจูุงูุงุช ุจูู ุงูุฌูุงุช</li>
        <li>ุฅุฏุงุฑุฉ ุงููููุฉ ูุงูุตูุงุญูุงุช</li>
        <li>ุฅุฌุฑุงุกุงุช ุงูุงุณุชุฌุงุจุฉ ููุญูุงุฏุซ</li>
      </ul></div>`;
  }
  function renderContact(){
    view.innerHTML = `<div class="card"><h2>ุงุชุตู ุจูุง</h2>
      <div class="toolbar">
        <input class="input" id="ct_name" placeholder="ุงูุงุณู">
        <input class="input" id="ct_mail" placeholder="ุงูุจุฑูุฏ">
        <input class="input" id="ct_msg" placeholder="ุฑุณุงูุชู">
        <button class="btn" id="ct_send">ุฅุฑุณุงู</button>
      </div>
      <div id="ct_status" style="color:#065f46;display:none">โ ุชู ุงูุงุณุชูุงู.</div>
    </div>`;
    document.getElementById('ct_send').onclick = ()=>{
      document.getElementById('ct_status').style.display='block';
      setTimeout(()=> document.getElementById('ct_status').style.display='none', 1600);
    };
  }
  function auxRouter(){
    const h = location.hash;
    if (h==="#/support") return renderSupport();
    if (h==="#/policies") return renderPolicies();
    if (h==="#/contact") return renderContact();
  }
  window.addEventListener('hashchange', auxRouter);
  window.addEventListener('load', auxRouter);
})();

/* 6) ุฃููุฑุฏููู: ูุฌููุนุฉ ูุงุญุฏุฉ ููุชูุญุฉ ุฏููุงู (ุชุฃููุฏ ุฅุถุงูู) */
(function ensureAccordionOneOpen(){
  document.querySelectorAll('.mega-left').forEach(cont=>{
    const groups = cont.querySelectorAll('details');
    groups.forEach(d=>{
      d.addEventListener('toggle', ()=>{ if(d.open){ groups.forEach(x=>{ if(x!==d) x.open=false; }); } });
    });
  });
})();
</script>
